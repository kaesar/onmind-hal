name: Trivy
description: Container security scanner
commands:
  install:
    - docker pull aquasec/trivy:latest
  setup:
    - mkdir -p ~/wsdata/trivy/cache
  run: |-
    docker run \
          -d \
          --name trivy \
          --network {{NETWORK_NAME}} \
          -p 8087:8080 \
          -v /var/run/docker.sock:/var/run/docker.sock \
          -v ~/wsdata/trivy/cache:/root/.cache aquasec/trivy:latest server \
          --listen 0.0.0.0:8080
variables:
  - NETWORK_NAME
dependencies: []
