{
  "name": "Kestra",
  "description": "Orchestration and scheduling platform",
  "commands": {
    "install": [
      "docker pull kestra/kestra:latest"
    ],
    "setup": [
      "docker network create {{NETWORK_NAME}} || true",
      "mkdir -p ~/wsdata/kestra/data",
      "cat > ~/wsdata/kestra/application.yml << 'EOF'\nkestra:\n  storage:\n    type: local\n    local:\n      base-path: /app/storage\n  queue:\n    type: memory\n  repository:\n    type: memory\n  server:\n    basic-auth:\n      enabled: false\n  datasources:\n    postgres:\n      url: jdbc:h2:mem:public;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE\n      driverClassName: org.h2.Driver\n      username: sa\n      password: \"\"\nEOF"
    ],
    "run": "docker run -d --name kestra --network {{NETWORK_NAME}} -p 8080:8080 -v ~/wsdata/kestra/data:/app/storage -v ~/wsdata/kestra/application.yml:/app/confs/application.yml -v /var/run/docker.sock:/var/run/docker.sock kestra/kestra:latest server standalone --config=/app/confs/application.yml"
  },
  "variables": ["NETWORK_NAME"],
  "dependencies": []
}
