name: Outline
description: Team knowledge base and wiki (requires PostgreSQL and Redis)
commands:
  install:
    - docker pull outlinewiki/outline:latest
  setup:
    - mkdir -p ~/wsdata/outline/data
  run: |-
    docker run \
          -d \
          --name outline \
          --network {{NETWORK_NAME}} \
          -p 3030:3000 \
          -v ~/wsdata/outline/data:/var/lib/outline/data \
          -e SECRET_KEY={{SECRET_KEY}} \
          -e UTILS_SECRET={{UTILS_SECRET}} \
          -e DATABASE_URL=postgres://root:{{STORAGE_PASSWORD}}@postgresql:5432/homelab \
          -e PGSSLMODE=disable \
          -e REDIS_URL=redis://redis:6379 \
          -e URL=https://outline.{{DOMAIN}} \
          -e PORT=3000 \
          outlinewiki/outline:latest
variables:
  - NETWORK_NAME
  - STORAGE_PASSWORD
  - DOMAIN
  - SECRET_KEY
  - UTILS_SECRET
dependencies:
  - postgresql
  - redis
