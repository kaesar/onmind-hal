name: mariadb-service
description: MariaDB database service
commands:
  install:
    - docker pull mariadb:latest
  setup:
    - mkdir -p ~/wsdata/mariadb/data
    - docker volume create mariadb_data
  run: |-
    docker run \
          -d \
          --name mariadb \
          --network {{NETWORK_NAME}} \
          -p 3306:3306 \
          -e MARIADB_ROOT_PASSWORD={{STORAGE_PASSWORD}} \
          -e MARIADB_DATABASE=homelab \
          -e MARIADB_USER=root \
          -e MARIADB_PASSWORD={{STORAGE_PASSWORD}} \
          -v mariadb_data:/var/lib/mysql mariadb:latest
variables:
  - NETWORK_NAME
  - STORAGE_PASSWORD
ports:
  - "3306:3306"
volumes:
  - mariadb_data:/var/lib/mysql
environment:
  MARIADB_DATABASE: homelab
  MARIADB_USER: root
  MARIADB_PASSWORD: "{{STORAGE_PASSWORD}}"
accessUrl: mysql://root:{{STORAGE_PASSWORD}}@{{IP}}:3306/homelab
dependencies: []
isCore: false
